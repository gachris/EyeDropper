<devtoolbox:WindowEx
    x:Class="EyeDropper.UI.DialogWindows.Views.DialogWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:behaviors="clr-namespace:EyeDropper.UI.Behaviors"
    xmlns:commands="clr-namespace:EyeDropper.UI.DialogWindows.Commands"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:devtoolbox="http://devtoolbox.wpf/winfx/2021/xaml/presentation"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewModels="clr-namespace:EyeDropper.UI.DialogWindows.ViewModels"
    Width="700"
    Height="500"
    d:DataContext="{d:DesignInstance viewModels:DialogWindowViewModel}"
    Focusable="False"
    FontFamily="Segoe UI"
    FontSize="{DynamicResource FontSize14}"
    mc:Ignorable="d">
    <devtoolbox:WindowEx.TitleTextBlockStyle>
        <Style TargetType="TextBlock">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
        </Style>
    </devtoolbox:WindowEx.TitleTextBlockStyle>
    <devtoolbox:WindowEx.Resources>
        <ResourceDictionary>

            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />

            <ItemsPanelTemplate x:Key="ButtonsItemsPanelTemplate">
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>

            <DataTemplate x:Key="ButtonItemTemplate" DataType="{x:Type viewModels:PluginButtonViewModel}">
                <StackPanel Orientation="Horizontal">
                    <Button
                        x:Name="button"
                        Command="{Binding Command}"
                        Content="{Binding Content}"
                        IsDefault="{Binding IsDefault}" />
                </StackPanel>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource PreviousData}}" Value="{x:Null}">
                        <Setter TargetName="button" Property="Margin" Value="8,0,0,0" />
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>

        </ResourceDictionary>
    </devtoolbox:WindowEx.Resources>
    <devtoolbox:WindowEx.IconTemplate>
        <DataTemplate>
            <ContentControl
                Width="26"
                Height="26"
                Content="{Binding}"
                Focusable="False"
                IsTabStop="False" />
        </DataTemplate>
    </devtoolbox:WindowEx.IconTemplate>
    <devtoolbox:WaitingIndicator
        x:Name="WaitingAnimation"
        Focusable="False"
        InProgress="{Binding WaitingAnimationBusy}">
        <devtoolbox:WaitingIndicator.Message>
            <StackPanel>
                <TextBlock Text="{Binding WaitingAnimationTitle}" />
                <TextBlock Text="{Binding WaitingAnimationMessage}" />
            </StackPanel>
        </devtoolbox:WaitingIndicator.Message>
        <b:Interaction.Behaviors>
            <behaviors:RoutedCommandBinding Command="{Binding OKCommand}" RoutedCommand="commands:DialogWindowCommands.OK" />
            <behaviors:RoutedCommandBinding Command="{Binding CancelCommand}" RoutedCommand="commands:DialogWindowCommands.Cancel" />
        </b:Interaction.Behaviors>
        <Grid UseLayoutRounding="True">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <ContentControl
                Grid.Row="0"
                Content="{Binding View}"
                Focusable="False"
                IsTabStop="False" />
            <Grid
                Grid.Row="1"
                Margin="20,0"
                Visibility="{Binding IsFooterVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <ItemsControl
                    x:Name="LeftButtonContainer"
                    Grid.Column="0"
                    Padding="0,12,0,8"
                    ItemTemplate="{StaticResource ButtonItemTemplate}"
                    ItemsPanel="{StaticResource ButtonsItemsPanelTemplate}"
                    ItemsSource="{Binding LeftButtons}" />
                <ItemsControl
                    x:Name="RightButtonContainer"
                    Grid.Column="2"
                    Padding="0,8,0,12"
                    ItemTemplate="{StaticResource ButtonItemTemplate}"
                    ItemsPanel="{StaticResource ButtonsItemsPanelTemplate}"
                    ItemsSource="{Binding RightButtons}" />
            </Grid>
        </Grid>
    </devtoolbox:WaitingIndicator>
</devtoolbox:WindowEx> 